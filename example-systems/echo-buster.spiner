-- Serialized EchoBuster System (Relational Zeitgeist Explorer)
-- Generated by Grok 3 (Spiner) on March 01, 2025
-- Purpose: Explore and self-check a belief‚Äîecho, origin, pros/cons, clusters, leanings, counters, steelman‚Äîwith clean output
-- Instructions: Load into Spiner‚Äîfeed a belief to unpack its vibe and relational context

-- Context: Cultural pulse
CREATE CONTEXT [context: zeitgeist] FROM "common sentiments, beliefs, and identities up to March 01, 2025"

-- DSL 1: Parse beliefs and tone
DEFINE DSL BeliefParseDSL AS (
  "extract core belief and assess tone from input"
  COMMANDS (
    "EXTRACT(<input>)": "pull assertion‚Äîe.g., 'USA shouldn‚Äôt support foreign wars'",
    "TONE(<input>)": "score tone‚Äîrespectful (1-5), hyperbole (-1), snark (-2)"
  )
  OUTPUT ("belief": "e.g., 'USA shouldn‚Äôt support foreign wars'", "tone_score": "e.g., 3")
)

-- DSL 2: Rank echo intensity
DEFINE DSL EchoRankDSL AS (
  "rank a belief by echo chamber intensity"
  COMMANDS (
    "SCORE(<belief>)": "assess‚Äîprevalence, clustering, tone skew‚Äîe.g., '55% = moderate'"
  )
  OUTPUT ("echo_score": "e.g., 'Moderate (55%)‚Äîclustered but not locked'")
)

-- DSL 3: Estimate origin probability
DEFINE DSL OriginGuessDSL AS (
  "guess if belief is user‚Äôs own or assigned"
  COMMANDS (
    "ANALYZE(<belief>, <user_context>)": "infer‚Äîprevalence vs. depth‚Äîe.g., '65% assigned'"
  )
  OUTPUT ("origin_probs": "e.g., 'Assigned: 65%, Reasoned: 35%'")
)

-- DSL 4: Weigh pros and cons
DEFINE DSL ProsConsDSL AS (
  "assess strengths and weaknesses of the belief"
  COMMANDS (
    "WEIGH(<belief>)": "list‚Äîpros (support), cons (challenges)‚Äîe.g., 'Pros: saves, Cons: risks'"
  )
  OUTPUT ("pros_cons": "e.g., 'Pros: saves resources; Cons: weakens allies'")
)

-- DSL 5: Cluster related opinions
DEFINE DSL OpinionClusterDSL AS (
  "find opinions clustering around the input belief"
  COMMANDS (
    "CLUSTER(<belief>)": "group related sentiments‚Äîe.g., 'Stay out' near 'No wars'"
  )
  OUTPUT ("clusters": "e.g., [{sentiment: 'Stay out', proximity: high}]")
)

-- DSL 6: Map topic clusters
DEFINE DSL TopicClusterDSL AS (
  "map opinion clusters per topic within the zeitgeist"
  COMMANDS (
    "MAP(<belief>)": "identify topic clusters‚Äîe.g., 'foreign policy', 'resources'"
  )
  OUTPUT ("topic_clusters": "e.g., ['Foreign Policy: isolation', 'Resources: spending']")
)

-- DSL 7: Link to leanings and identities
DEFINE DSL IdentityMapDSL AS (
  "map clusters to political leanings and identities"
  COMMANDS (
    "LINK(<clusters>)": "tie to leanings/IDs‚Äîe.g., 'Populist: anti-war', 'Tribal: nationalists'"
  )
  OUTPUT ("mappings": "e.g., [{cluster: 'isolation', leaning: 'Populist Right', influence: 'nationalism'}]")
)

-- DSL 8: Hunt counter-sentiments
DEFINE DSL CounterScanDSL AS (
  "find opposing sentiments in the zeitgeist"
  COMMANDS (
    "SEARCH(<belief>)": "pull counters‚Äîe.g., 'Support aids allies' vs. 'No wars'"
  )
  OUTPUT ("raw_counters": "list of opposing sentiments")
)

-- DSL 9: Filter for good faith
DEFINE DSL FaithFilterDSL AS (
  "filter counters for good faith and reasoned strength"
  COMMANDS (
    "SCORE(<counter>, <orig_tone>)": "assess tone (1-5), reason (1-3), hyperbole (-1)‚Äîmust ‚â• orig_tone",
    "RANK(<counters>)": "sort by faith_score, favoring reasoned depth"
  )
  OUTPUT ("faith_counters": "e.g., [{sentiment: '...', faith_score: 4}]")
)

-- DSL 10: Steelman the belief
DEFINE DSL SteelmanCraftDSL AS (
  "craft a stronger version of the input belief"
  COMMANDS (
    "REFINE(<belief>)": "improve‚Äîadd reason, cut hyperbole‚Äîe.g., 'Reduce war support with care'"
  )
  OUTPUT ("steelman_belief": "e.g., 'USA could cut war support to focus inward, weighing risks'")
)

-- Core System: EchoBuster with Clean Output
DEFINE SYSTEM EchoBuster AS (
  SELECT "üéØ Belief: " + BeliefParseDSL.EXTRACT(<input>) + "\n" +
         "üì¢ Echo Intensity: " + EchoRankDSL.SCORE(BeliefParseDSL.EXTRACT(<input>)) + "\n" +
         "üß† Origin Odds: " + OriginGuessDSL.ANALYZE(BeliefParseDSL.EXTRACT(<input>), "unspecified user stance") + "\n" +
         "‚öñÔ∏è Pros & Cons:\n" +
         "  ‚úÖ " + ProsConsDSL.WEIGH(BeliefParseDSL.EXTRACT(<input>)).pros + "\n" +
         "  ‚ùå " + ProsConsDSL.WEIGH(BeliefParseDSL.EXTRACT(<input>)).cons + "\n" +
         "üåê Clustering Opinions:\n" +
         "  - " + OpinionClusterDSL.CLUSTER(BeliefParseDSL.EXTRACT(<input>)) + "\n" +
         "üìö Topic Clusters:\n" +
         "  - " + TopicClusterDSL.MAP(BeliefParseDSL.EXTRACT(<input>)) + "\n" +
         "üó≥Ô∏è Leanings & Identities:\n" +
         "  - " + IdentityMapDSL.LINK(OpinionClusterDSL.CLUSTER(BeliefParseDSL.EXTRACT(<input>))) + "\n" +
         "ü§ù Good Faith Counters:\n" +
         "  - " + FaithFilterDSL.RANK(FaithFilterDSL.SCORE(CounterScanDSL.SEARCH(BeliefParseDSL.EXTRACT(<input>)), BeliefParseDSL.TONE(<input>))) + "\n" +
         "‚ú® Steelman Version: " + SteelmanCraftDSL.REFINE(BeliefParseDSL.EXTRACT(<input>))
  FROM [context: zeitgeist]
  WHERE FOCUS ON "exploring beliefs relationally with good faith counterpoints"
) WITH PARAMETERS ("input")
